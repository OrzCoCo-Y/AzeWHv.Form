<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Demo</title>
    <!-- 请勿在项目正式环境中引用该 layui.css 地址 -->
    <link href="layui/css/layui.css" rel="stylesheet" />
    <style>
        .announcement {
            margin: 20px 0;
        }

        #form {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0;
        }

        .layui-form {
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            background-color: white;
        }

        .layui-form-item {
            display: flex;
            flex-direction: column;
            margin-bottom: 15px;
        }

        .layui-form-label {
            margin-bottom: 5px;
            text-align: left;
        }

        .layui-input-block {
            margin-left: 0;
        }

            .layui-input-block input {
                border-radius: 5px;
                box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
            }

        .notice {
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            margin-top: 10px;
            font-weight: bold;
        }

        body {
            animation: backgroundAnimation 5s infinite alternate;
        }

        @keyframes backgroundAnimation {
            0%, 100% {
                background-color: #f5f5f5;
            }

            50% {
                background-color: #d3d3d3;
            }
        }
    </style>
</head>
<body>
    <div class="main-container">

        <div id="form" class="layui-row">
            <div class="layui-col-md5 layui-col-sm11 layui-col-xs11">
                <div class="announcement layui-form">
                    <h2 class="notice_h2">感谢选择阿泽de店！</h2>
                    <p class="notice_p">请注意，所有信息必须用 <b>英文</b> 填写</p>
                    <p class="notice_p">请确保所填信息无误，有任何问题联系客服</p>
                    <p class="notice_p">多次填写将以最后一次填写为准</p>
                </div>

                <form class="layui-form">
                    <header class="layui-form-item">

                        <br>
                        <h2 class="notice_h2">淘宝号：XXXXXXXXX</h2>
                    </header>

                    <div class="layui-form-item">
                        <label class="layui-form-label">姓【护照】</label> <!-- 表单项标签：姓氏 -->
                        <div class="layui-input-block">
                            <input type="text" name="familyName" required lay-verify="required" placeholder="例: ZHANG" autocomplete="off" class="layui-input"> <!-- 姓氏输入框，必填项 -->
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">名【护照】</label> <!-- 表单项标签：名字 -->
                        <div class="layui-input-block">
                            <input type="text" name="givenName" required lay-verify="required" placeholder="例：SAN" autocomplete="off" class="layui-input "> <!-- 名字输入框，必填项 -->
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label">性别</label> <!-- 表单项标签：性别 -->
                        <div class="layui-input-block">
                            <input type="radio" name="sex" value="Male" title="男" checked> <!-- 性别单选按钮：男，默认选中 -->
                            <input type="radio" name="sex" value="Female" title="女"> <!-- 性别单选按钮：女 -->
                        </div>
                    </div>


                    <div class="layui-form-item">
                        <label class="layui-form-label">邮箱</label> <!-- 表单项标签：电子邮件 -->
                        <div class="layui-input-block">
                            <input type="email" name="email" required lay-verify="email" placeholder="例：abcxxxyyy@163.com" autocomplete="off" class="layui-input "> <!-- 电子邮件输入框，必填项且需符合邮箱格式 -->
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">电话</label> <!-- 表单项标签：电话号码 -->
                        <div class="layui-input-block">
                            <input type="tel" name="phone" required lay-verify="required|phone" placeholder="例:19288889999" autocomplete="off" class="layui-input "> <!-- 电话号码输入框，必填项且需符合电话格式 -->
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label">护照编码</label> <!-- 表单项标签：护照号 -->
                        <div class="layui-input-block">
                            <input type="text" name="passport" required lay-verify="required" placeholder="例:EF1234567" autocomplete="off" class="layui-input "> <!-- 护照号输入框，必填项 -->
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">护照过期日期</label> <!-- 表单项标签：护照过期日期 -->
                        <div class="layui-input-block">
                            <input type="date" name="passportExpireDate" required lay-verify="required" autocomplete="off" class="layui-input "> <!-- 护照过期日期选择框，必填项 -->
                        </div>
                        <div class="notice">
                            注意：
                            <br>新西兰官方要求离开新西兰前至少还有3个月有效期。
                            <br>whv开始时间自2025年7月02日申请之日开始算起，所以请确保护照过期日期至少在2026年10月之后。
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">生日</label> <!-- 表单项标签：生日 -->
                        <div class="layui-input-block">
                            <input type="date" name="birthday" required lay-verify="required" autocomplete="off" class="layui-input "> <!-- 生日选择框，必填项 -->
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">身份证号码</label> <!-- 表单项标签：身份证号码 -->
                        <div class="layui-input-block">
                            <input type="text" name="idNumber" required lay-verify="required" placeholder="例： 40010119900307711X" autocomplete="off" class="layui-input "> <!-- 身份证号码输入框，必填项 -->
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">身份证开始日期</label> <!-- 表单项标签：身份证开始日期 -->
                        <div class="layui-input-block">
                            <input type="date" name="idStart" required lay-verify="required" placeholder="" autocomplete="off" class="layui-input ">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">身份证结束日期</label> <!-- 表单项标签：身份证结束日期 -->
                        <div class="layui-input-block">
                            <input type="date" name="idEnd" required lay-verify="required" placeholder="" autocomplete="off" class="layui-input ">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">城市(现居址)</label> <!-- 表单项标签：城市地址 -->
                        <div class="layui-input-block">
                            <input type="text" name="addressCity" required lay-verify="required" placeholder="例：BEIJING" autocomplete="off" class="layui-input "> <!-- 城市地址输入框，必填项 -->
                        </div>
                        <!--<div class="notice">
                            现居住地址-城市-北京
                        </div>-->
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">区/县(现居址)</label> <!-- 表单项标签：区县地址 -->
                        <div class="layui-input-block">
                            <input type="text" name="addressSuburb" required lay-verify="required" placeholder="例：ZHONGSHAN" autocomplete="off" class="layui-input "> <!-- 区县地址输入框，必填项 -->
                        </div>
                        <!--<div class="notice">
                            现居住地址-区/县地址-中山
                        </div>-->
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">街道(现居址)</label> <!-- 表单项标签：街道地址 -->
                        <div class="layui-input-block">
                            <input type="text" name="addressStreet" required lay-verify="required" placeholder="例：123 ZHONGSHAN ROAD" autocomplete="off" class="layui-input "> <!-- 街道地址输入框，必填项 -->
                        </div>
                        <!--<div class="notice">
                            现居住地址-街道地址-中山路123号
                        </div>-->
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label">是否去过新西兰</label> <!-- 表单项标签：是否去过新西兰 -->
                        <div class="layui-input-block">
                            <input type="radio" name="beenToNZ" lay-filter="demo-radio-filter" value="No" title="否" checked> <!-- 单选按钮：否，默认选中 -->
                            <input type="radio" name="beenToNZ" lay-filter="demo-radio-filter" value="Yes" title="是"> <!-- 单选按钮：是 -->
                        </div>
                    </div>
                    <div class="layui-form-item" id="nzVisitTimeContainer" style="display:none;">
                        <label class="layui-form-label">上次去新西兰的时间</label> <!-- 表单项标签：上次去新西兰的时间 -->
                        <div class="layui-input-block">
                            <input type="date" name="nzVisitTime" placeholder="Select Last Visit Time to NZ" autocomplete="off" class="layui-input "> <!-- 上次去新西兰的时间选择框，必填项 -->
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <div class="layui-input-block">
                            <button class="layui-btn" lay-submit lay-filter="formDemo" style="width: 100%;">提交</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script src="layui/layui.js"></script>
    <script>
        layui.use(function () {
            var form = layui.form;

            form.on('submit(formDemo)', async function (data) {
                const fields = data.field;
                const dateFields = ['passportExpireDate', 'birthday', 'idStart', 'idEnd'];

                dateFields.forEach(field => {
                    if (fields[field]) {
                        fields[field] = new Date(fields[field]).toISOString();
                    }
                });

                if (!fields['nzVisitTime']) {
                    delete fields['nzVisitTime'];
                } else {
                    fields['nzVisitTime'] = new Date(fields['nzVisitTime']).toISOString();
                }

                try {
                    const response = await fetch('https://localhost:7111/api/CustomInfo/CustomerInfo', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(fields)
                    });

                    const result = await response.json();
                    console.log('Success:', result);
                    layer.msg('提交成功！');
                } catch (error) {
                    console.error('Error:', error);
                    layer.msg('提交失败，请重试！');
                }

                return false;
            });

            form.on('radio(demo-radio-filter)', function (data) {
                document.getElementById('nzVisitTimeContainer').style.display = data.value === 'Yes' ? 'block' : 'none';
            });
        });

        document.querySelectorAll('input[type="date"]').forEach(function (input) {
            input.addEventListener('focus', function () {
                this.showPicker();
            });
        });
    </script>
</body>
</html>



